server {
    listen 80;
    server_name form.globalcallpartners.cloud;

    # Frontend - Arquivos estáticos
    location / {
        root /var/www/form-global-call-partners/frontend/dist;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api/ {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # Facebook Auth / Connect
    location /connect {
        proxy_pass http://localhost:3001;
        proxy_set_header Host $host;
    }

    location /auth/ {
        proxy_pass http://localhost:3001;
        proxy_set_header Host $host;
    }

    # Public folder (imagens, etc)
    location /public/ {
        proxy_pass http://localhost:3001;
        proxy_set_header Host $host;
    }

    # Configuração de segurança básica
    client_max_body_size 20M;
}
